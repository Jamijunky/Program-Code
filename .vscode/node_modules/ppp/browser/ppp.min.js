/*!
 * PPP - A slim promise implementation
 * Copyright (c) 2015 David Braden V, <neonphog@neonphog.com>
 * Offered for use under the MIT open source license
 * @license http://opensource.org/licenses/MIT
 */
!function(a,b){if("function"==typeof define&&define.amd)define(["exports"],function(c){a(c,b)});else if("undefined"!=typeof exports)a(exports,b);else{var c=b.ppp;b.ppp={noConflict:function(){return b.ppp=c,this}},a(b.ppp,b)}}(function(a,b){"use strict";function c(a,b,c,d,e,f){try{return a.call(b,c,d,e,f)}catch(g){return J.e=g,J}}function d(a,b){for(var c in b)a[c]=b[c]}function e(a,b){return function(){a.apply(b,arguments)}}function f(a,b,d){var e=c(g,this,a,b,d);e===J&&(d&&(A&&v(J.e,d),k.call(d,J.e)),J.e=null)}function g(a,b,c){if("function"!=typeof a)return void(c&&j.call(c,this._d));var d;d=b?a.call(b,this._d):a(this._d),c&&m.call(c,d)}function h(a,b,d){var e=c(i,this,a,b,d);e===J&&(d&&(A&&v(J.e,d),k.call(d,J.e)),J.e=null)}function i(a,b,c){if("function"!=typeof a)return void(c&&k.call(c,this._d));var d;d=b?a.call(b,this._d):a(this._d),c&&m.call(c,d)}function j(a){if(void 0===this._s||this._s===E){A&&r(this,"resolve"),this._d=a,this._s=G;for(var b=0,c=this._c.length;c>b;++b){var d=this._c[b];I(f,this,[d[0],d[2],d[3]])}this._c=null}}function k(a){if(void 0===this._s||this._s===E){A&&(r(this,"reject"),a instanceof Error&&v(a,this)),this._d=a,this._s=H;for(var b=0,c=this._c.length;c>b;++b){var d=this._c[b];I(h,this,[d[1],d[2],d[3]])}this._c=null}}function l(a){return a&&a.then}function m(a){if(void 0===this._s||this._s===E){a instanceof u&&(a=a.promise);var b,d;if(this===a)throw new TypeError("Cannot resolve a promise with itself");if(A&&r(this,"_resolve"),a instanceof t)return b=new s(this),d=c(n,a,b.resolve,b.reject,b,null),void(d===J&&(A&&v(J.e,this),b.reject(J.e),J.e=null));var f=c(l,null,a);return f===J?(A&&v(J.e,this),k.call(this,J.e),void(J.e=null)):("object"==typeof a&&null!==a||"function"==typeof a)&&"function"==typeof f?(b=new s(this),d=c(f,a,e(b.resolve,b),e(b.reject,b)),void(d===J&&(A&&v(J.e,this),b.reject(J.e),J.e=null))):void j.call(this,a)}}function n(a,b,c,d){return this._s===G?void I(f,this,[a,c,d]):this._s===H?void I(h,this,[b,c,d]):void this._c.push([a,b,c,d])}function o(){if(!this.isComplete()){var a,b,c,d=!0;for(b=0,c=this._subs.length;c>b;++b)if(a=this._subs[b],a.isResolved()||(d=!1),a.isRejected())return this._subs=null,void k.call(this,a.valueOf());if(d){var e=[];for(b=0,c=this._subs.length;c>b;++b)a=this._subs[b],e.push(a.valueOf());this._subs=null,j.call(this,e)}}}function p(){if(!this.isComplete()){var a,b,c;for(b=0,c=this._subs.length;c>b;++b){if(a=this._subs[b],a.isResolved())return this._subs=null,void j.call(this,a.valueOf());if(a.isRejected())return this._subs=null,void k.call(this,a.valueOf())}}}function q(a){try{throw new Error}catch(b){return b}}function r(a,b){"string"!=typeof a._r&&(a._r="");var c=q();v(c,a),a._r+="Triggered from "+b+":\n",a._r+=c.stack}function s(a){this._p=a,a._p=this,this._p._s=F}function t(a){if(this._c=[],"function"==typeof a&&a(e(j,this),e(k,this)),A){var b=q();this.stack=b.stack+""}}function u(){this.promise=new t}function v(a,b){if(A&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(K)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+K+"\n");a.stack=w(e)}}function w(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];z(e)||x(e)||!e||c.push(e)}return c.join("\n")}function x(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function y(a){for(var b=0,c=L.length;c>b;++b){var d=L[b].exec(a);if(d)return d[1]}}function z(a){var b=y(a);return b?b===D:!1}a.version="0.8.6";var A=!1,B=!1;try{throw new Error}catch(C){B=!!C.stack}var D,E="i",F="p",G="f",H="r",I=function(){function a(){var a=e;e=[];for(var b=0,f=a.length;f>b;++b)a[b][0].apply(a[b][1],a[b][2]);e.length?c():d=!1}var c,d=!1,e=[],f=b.MutationObserver||b.WebKitMutationObserver;if("function"==typeof setImmediate)c=function(){setImmediate(a)};else if("object"==typeof process&&process.nextTick)c=function(){process.nextTick(a)};else if("undefined"!=typeof document&&document.createTextNode&&f){var g=1,h=document.createTextNode("");new f(a).observe(h,{characterData:!0}),c=function(){h.data=g*=-1}}else if("undefined"!=typeof MessageChannel){var i=new MessageChannel,j=function(){i.port2.postMessage(0)};i.port1.onmessage=function(){c=j,i.port1.onmessage=a,a()},c=function(){setTimeout(a,0),j()}}else c=function(){setTimeout(a,0)};return function(a,b,f){e.push([a,b,f]),d||(d=!0,c())}}(),J={e:null};d(s.prototype,{resolve:function(a){if(!this._p||this._p._p!==this)return void(this._p=null);this._p._s!==F&&(this._p._p=null,this._p=null),this._p._s=E;var b=this._p;this._p._p=null,this._p=null,m.call(b,a)},reject:function(a){if(!this._p||this._p._p!==this)return void(this._p=null);this._p._s!==F&&(this._p._p=null,this._p=null),this._p._s=E;var b=this._p;this._p._p=null,this._p=null,k.call(b,a)}}),d(t.prototype,{valueOf:function(){return this._d},isResolved:function(){return this._s===G},isRejected:function(){return this._s===H},isComplete:function(){return this._s===G||this._s===H},then:function(a,b,c){b&&"function"!=typeof b&&(c=b,b=null);var d=new t;return A&&d&&(d.source=this),n.call(this,a,b,c,d),d},"catch":function(a,b){return this.then(null,a,b)},getStackTrace:function(){return this._r}}),a.Promise=t,d(u.prototype,{resolve:function(a){return j.call(this.promise,a),this},reject:function(a){return k.call(this.promise,a),this}}),d(t,{Defer:u,defer:function(){return new u},resolve:function(a){var b=new t;return m.call(b,a),b},reject:function(a){var b=new t;return k.call(b,a),b},when:function(a){if(a instanceof t)return a;if(a instanceof u)return a.promise;var b=new t;return m.call(b,a),b},all:function(a){var b=new t,c=0;b._subs=[];var d,e,f=Object.keys(a);for(d=0,e=f.length;e>d;++d){++c;var g=t.when(a[f[d]]);n.call(g,o,o,b,null),b._subs.push(g)}return c?(o.call(b),b):(j.call(b,[]),b)},race:function(a){var b=new t,c=0;b._subs=[];var d,e,f=Object.keys(a);for(d=0,e=f.length;e>d;++d){++c;var g=t.when(a[f[d]]);n.call(g,p,p,b,null),b._subs.push(g)}return c?(p.call(b),b):(j.call(b,[]),b)},setDebugStackTrace:function(a){A=B?a:!1}});var K="From previous event:",L=[/at .+ \((.+):(\d+):(?:\d+)\)$/,/at ([^ ]+):(\d+):(?:\d+)$/,/.*@(.+):(\d+)$/,/at .*\(([^ ]+):(\d+):(?:\d+)\)$/];if(B)try{throw new Error}catch(C){var M=C.stack.split("\n"),N=M[0].indexOf("@")>0?M[1]:M[2];D=y(N)}},this);
//# sourceMappingURL=ppp.min.js.map